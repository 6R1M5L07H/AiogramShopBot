--
-- File generated with SQLiteStudio v3.4.4 on Вс окт 22 22:27:31 2023
--
-- Text encoding used: UTF-8
--
PRAGMA foreign_keys = off;
BEGIN TRANSACTION;

-- Table: buyItem
CREATE TABLE IF NOT EXISTS buyItem (buyItem_id INTEGER PRIMARY KEY AUTOINCREMENT UNIQUE NOT NULL, item_id INTEGER REFERENCES items (item_id) ON DELETE CASCADE ON UPDATE CASCADE NOT NULL, buy_id INTEGER REFERENCES buys (buy_id) ON DELETE CASCADE ON UPDATE CASCADE NOT NULL);

-- Table: buys
CREATE TABLE IF NOT EXISTS buys (buy_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, user_id STRING NOT NULL REFERENCES users (user_id) ON DELETE CASCADE ON UPDATE CASCADE, quantity INTEGER NOT NULL, total_price REAL NOT NULL, buy_datetime DATETIME DEFAULT (DATETIME('NOW')), is_refunded INTEGER NOT NULL DEFAULT (0));

-- Table: items
CREATE TABLE IF NOT EXISTS items (item_id INTEGER PRIMARY KEY AUTOINCREMENT UNIQUE NOT NULL, category STRING NOT NULL, subcategory STRING NOT NULL, private_data STRING NOT NULL, price REAL NOT NULL, is_sold BOOLEAN DEFAULT (0) NOT NULL, description STRING NOT NULL, is_new BOOLEAN NOT NULL DEFAULT (1));

-- Table: users
CREATE TABLE IF NOT EXISTS users (user_id INTEGER PRIMARY KEY AUTOINCREMENT UNIQUE NOT NULL, telegram_id INTEGER UNIQUE NOT NULL, btc_address STRING NOT NULL UNIQUE, ltc_address STRING UNIQUE NOT NULL, trx_address STRING NOT NULL UNIQUE, top_up_amount REAL DEFAULT (0) NOT NULL, consume_records REAL DEFAULT (0) NOT NULL, last_refresh STRING, btc_balance REAL NOT NULL DEFAULT (0), ltc_balance REAL NOT NULL DEFAULT (0), usdt_balance REAL NOT NULL DEFAULT (0), is_new BOOLEAN NOT NULL DEFAULT (1), telegram_username STRING, join_date DATETIME DEFAULT (DATETIME('NOW')));

COMMIT TRANSACTION;
PRAGMA foreign_keys = on;
